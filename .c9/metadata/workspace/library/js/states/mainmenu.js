{"filter":false,"title":"mainmenu.js","tooltip":"/library/js/states/mainmenu.js","undoManager":{"mark":61,"position":61,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":71,"column":0},"action":"insert","lines":["// Preload State","PhaserBp.Preload = function(game) {","\tconsole.log(\"Load State Initiated\");","  \t","  \tthis.background = null;","    this.preloadBar = null;","","    this.ready = false;","};","","PhaserBp.Preload.prototype = {","","\tpreload: function () {","\t\t// These are the assets we loaded in Boot.js","        // A nice sparkly background and a loading progress bar","","        // If you want background, uncomment ","        //this.background = this.add.sprite(0, 0, 'preloaderBackground');","        ","        this.preloadBar = this.add.sprite(gameWidth / 2 - 193 / 2, ","        \tgameHeight / 2 - 382 / 2, 'preloaderBar'); // center preload sprite gamewidth / 2 - sprite.width / 2","        \t","        // This sets the preloadBar sprite as a loader sprite.","        // What that does is automatically crop the sprite from 0 to full-width","        // as the files below are loaded in.","        this.load.setPreloadSprite(this.preloadBar);","        \t","        // Here we load the rest of the assets our game needs.","        this.load.image('menuBg', 'assets/imgages/menu_background.png'); // MainMenu background image","        this.load.image('playButton', 'assets/images/play_button.png'); // Play button image for MainMenu","        this.load.audio('menuMusic', ['assets/audio/main_menu_undiscovered.mp3']); // Music for MainMenu","        this.load.image('btnMusicPause', 'assets/images/btn-musicpause.png'); // MainMenu music stop button","        this.load.image('btnMusicPlay', 'assets/images/btn-musicplay.png'); // MainMenu music play button","","        this.load.image('gameBg', 'assets/img/game_background.png'); // Game background image","        this.load.atlasJSONHash('fly', 'assets/sprites/fly.png', 'assets/sprites/fly.json'); // Fly sprite json","        ","        //this.load.image('splash', 'assets/img/splash.png'); // Splash image","","        this.load.image('btnPause', 'assets/images/btn-pause.png'); // Game pause button","        this.load.image('btnPlay', 'assets/images/btn-play.png'); // Game unpause button","","        // Fonts","        ","       // + lots of other required assets here","       ","    \tthis.load.image('renderTest', 'library/assets/images/megaman.png');","\t},","","\tcreate: function () {","\t\t// Once the load has finished we disable the crop because we're going to sit in the update loop for a short while as the music decodes","        this.preloadBar.cropEnabled = false;","\t},","","\tupdate: function () {","\t\t// You don't actually need to do this, but I find it gives a much smoother game experience.","        // Basically it will wait for our audio file to be decoded before proceeding to the MainMenu.","        // You can jump right into the menu if you want and still play the music, but you'll have a few","        // seconds of delay while the mp3 decodes - so if you need your music to be in-sync with your menu","        // it's best to wait for it to decode here first, then carry on.","","        // If you don't have any music in your game then put the game.state.start line into the create function and delete","        // the update function completely.","","        if (this.cache.isSoundDecoded('menuMusic') && this.ready === false) {","            this.ready = true;","            this.state.start('MainMenu');","        }","    \t//this.state.start('Game');","\t}","};",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":3},"end":{"row":0,"column":10},"action":"remove","lines":["Preload"]},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":9},"end":{"row":1,"column":16},"action":"remove","lines":["Preload"]},{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":11},"end":{"row":1,"column":12},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":12},"end":{"row":1,"column":13},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":13},"end":{"row":1,"column":14},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":9},"end":{"row":1,"column":14},"action":"remove","lines":["MainM"]},{"start":{"row":1,"column":9},"end":{"row":1,"column":17},"action":"insert","lines":["MainMenu"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":9},"end":{"row":10,"column":16},"action":"remove","lines":["Preload"]},{"start":{"row":10,"column":9},"end":{"row":10,"column":17},"action":"insert","lines":["MainMenu"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":2},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":12},"end":{"row":0,"column":13},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":13},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":3},"end":{"row":9,"column":23},"action":"remove","lines":["this.background = null;","    this.preloadBar = null;","","    this.ready = false;"]},{"start":{"row":6,"column":3},"end":{"row":7,"column":27},"action":"insert","lines":["this.music = null;","    this.playButton = null;"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":18},"action":"remove","lines":["Load"]},{"start":{"row":4,"column":14},"end":{"row":4,"column":15},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":15},"end":{"row":4,"column":16},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":16},"end":{"row":4,"column":17},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":18},"end":{"row":4,"column":19},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":19},"end":{"row":4,"column":20},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":20},"end":{"row":4,"column":21},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":21},"end":{"row":4,"column":22},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":11,"column":18},"action":"insert","lines":["// Pause flag","var paused = true;"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":18},"end":{"row":12,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":1},"end":{"row":55,"column":3},"action":"remove","lines":["preload: function () {","\t\t// These are the assets we loaded in Boot.js","        // A nice sparkly background and a loading progress bar","","        // If you want background, uncomment ","        //this.background = this.add.sprite(0, 0, 'preloaderBackground');","        ","        this.preloadBar = this.add.sprite(gameWidth / 2 - 193 / 2, ","        \tgameHeight / 2 - 382 / 2, 'preloaderBar'); // center preload sprite gamewidth / 2 - sprite.width / 2","        \t","        // This sets the preloadBar sprite as a loader sprite.","        // What that does is automatically crop the sprite from 0 to full-width","        // as the files below are loaded in.","        this.load.setPreloadSprite(this.preloadBar);","        \t","        // Here we load the rest of the assets our game needs.","        this.load.image('menuBg', 'assets/imgages/menu_background.png'); // MainMenu background image","        this.load.image('playButton', 'assets/images/play_button.png'); // Play button image for MainMenu","        this.load.audio('menuMusic', ['assets/audio/main_menu_undiscovered.mp3']); // Music for MainMenu","        this.load.image('btnMusicPause', 'assets/images/btn-musicpause.png'); // MainMenu music stop button","        this.load.image('btnMusicPlay', 'assets/images/btn-musicplay.png'); // MainMenu music play button","","        this.load.image('gameBg', 'assets/img/game_background.png'); // Game background image","        this.load.atlasJSONHash('fly', 'assets/sprites/fly.png', 'assets/sprites/fly.json'); // Fly sprite json","        ","        //this.load.image('splash', 'assets/img/splash.png'); // Splash image","","        this.load.image('btnPause', 'assets/images/btn-pause.png'); // Game pause button","        this.load.image('btnPlay', 'assets/images/btn-play.png'); // Game unpause button","","        // Fonts","        ","       // + lots of other required assets here","       ","    \tthis.load.image('renderTest', 'library/assets/images/megaman.png');","\t},","","\tcreate: function () {","\t\t// Once the load has finished we disable the crop because we're going to sit in the update loop for a short while as the music decodes","        this.preloadBar.cropEnabled = false;","\t},"]},{"start":{"row":15,"column":1},"end":{"row":39,"column":6},"action":"insert","lines":["// We've already preloaded our assets, so let's kick right into the Main Menu itself.","        // Here all we're doing is playing some music and adding a picture and button","        // Naturally I expect you to do something significantly better :)","","        // Here we add music","        this.music = this.add.audio('menuMusic');","        //this.music.play();","","        // Add menu background","        this.add.sprite(0, 0, 'menuBg');","","        // Add play button for game start","        this.playButton = this.add.button(gameWidth / 2 - 48, 260, 'playButton', this.startGame, this, 'buttonOver', 'buttonOut', 'buttonOver');","","        // Add a pause button","        this.btnMusicPause = this.game.add.button(20, 20, 'btnMusicPause', this.pauseMusic, this);","","        // Let's build a pause panel","        this.musicPanel = new MusicPanel(this.game);","        this.game.add.existing(this.musicPanel);","","        // Enter play music mode","        this.music.play();","        this.playMusic();","    },"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":4},"end":{"row":14,"column":25},"action":"insert","lines":["create: function () {"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":1},"end":{"row":15,"column":5},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":5},"end":{"row":55,"column":36},"action":"remove","lines":["\t// You don't actually need to do this, but I find it gives a much smoother game experience.","            // Basically it will wait for our audio file to be decoded before proceeding to the MainMenu.","            // You can jump right into the menu if you want and still play the music, but you'll have a few","            // seconds of delay while the mp3 decodes - so if you need your music to be in-sync with your menu","            // it's best to wait for it to decode here first, then carry on.","    ","            // If you don't have any music in your game then put the game.state.start line into the create function and delete","            // the update function completely.","    ","            if (this.cache.isSoundDecoded('menuMusic') && this.ready === false) {","                this.ready = true;","                this.state.start('MainMenu');","            }","        \t//this.state.start('Game');"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":5},"end":{"row":42,"column":48},"action":"insert","lines":["// Do some nice funky main menu effect here"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":5},"end":{"row":43,"column":0},"action":"insert","lines":["",""]},{"start":{"row":43,"column":0},"end":{"row":43,"column":5},"action":"insert","lines":["    \t"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":2},"end":{"row":44,"column":3},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":3},"end":{"row":45,"column":0},"action":"insert","lines":["",""]},{"start":{"row":45,"column":0},"end":{"row":45,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":1},"end":{"row":46,"column":0},"action":"insert","lines":["",""]},{"start":{"row":46,"column":0},"end":{"row":46,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":1},"end":{"row":78,"column":5},"action":"insert","lines":["startGame: function (pointer) {","","        // Ok, the Play Button has been clicked or touched, so let's stop the music (otherwise it'll carry on playing)","        this.music.stop();","","        // And start the actual game","        this.state.start('Game');","    },","","    pauseMusic: function () {","        if (!paused) {","            // Enter pause","            paused = true;","","            // Show pause panel","            this.musicPanel.show();","","            // Pause music","            this.music.pause();","        }","    },","","    playMusic: function () {","        if (paused) {","            // Leaving pause","            paused = false;","            // Hide pause panel","            this.musicPanel.hide();","","            // Resume music","            this.music.resume();","        }","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":0},"end":{"row":81,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":0},"end":{"row":109,"column":2},"action":"insert","lines":["// Create our pause panel extending Phaser.Group","var MusicPanel = function (game, parent) {","    // Super call to Phaser.Group","    Phaser.Group.call(this, game, parent);","","    // Add play button","    this.btnMusicPlay = this.game.add.button(20, 20, 'btnMusicPlay', function () {","        this.game.state.getCurrentState().playMusic();","    }, this);","","    this.add(this.btnMusicPlay);","","    // Place it out of bounds","    this.x = 0;","    this.y = -100;","};","","MusicPanel.prototype = Object.create(Phaser.Group.prototype);","MusicPanel.constructor = MusicPanel;","","MusicPanel.prototype.show = function () {","\t// Add tween","    this.game.add.tween(this).to({y: 0}, 500, Phaser.Easing.Bounce.Out, true);","};","MusicPanel.prototype.hide = function () {","\t// If you want tween uncomment","    //this.game.add.tween(this).to({y: -350}, 1, Phaser.Easing.Linear.NONE, true);","    this.y = -350;","};"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":109,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":82,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1422180821154,"hash":"6e88819fd937c1f5cccbecbcaf2ef9c31eadd375"}